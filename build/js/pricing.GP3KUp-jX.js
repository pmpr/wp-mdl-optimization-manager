/*! For license information please see pricing.GP3KUp-jX.js.LICENSE.txt */
!function(){const e=PRHelper.getHook(),t=PRHelper.getHTML(),r=PRHelper.getType(),s=PRHelper.getTool(),n=PRHelper.getForm(),a=PRHelper.getServer(),o=PRHelper.getRequest(),i=PRHelper.getSetting(),c=t.getElement(".pr-multistep-wrap"),l=t.getAttribute(c,"id"),d=t.getElement(".pr-multistep-body > .pr-spinner",c),p=window.PR_MULTISTEPS[l],_=a.getParams(),m=["order_request_domain","order_type","target","domain","step"];let g,h,u;function E(e){switch(e){case"choice_order_type":t.setElementActivity(t.getElement("#step_content_choice_order_type .next-action"),!r.isEmpty(h),!1);break;case"choice_order":t.setElementActivity(t.getElement("#step_content_choice_order .next-action"),!r.isEmpty(g),!1);break;case"choice_domain":!function(){const e=t.getElement("#step_content_choice_domain a.login-link");if(t.isElement(e)){const t=a.addParams({order_request_domain:"prev_domains"});e.href=a.addParams({redirect_to:encodeURIComponent(t)},e.href)}}()}}r.each(m,(e=>{if(_.hasOwnProperty(e))return t.spinner(d,!0),!1})),e.on("load",(function(){r.each(m,(t=>{if(_.hasOwnProperty(t)){let r=_[t];switch(t){case"order_type":e.simulateClick(`.order-type.selectable[data-name="${r}"]`),h=r,g=_.target,e.simulateClick(`.${h}.selectable[data-id="${g}"]`);break;case"step":p.goto(r);break;default:n.setFieldValue(`#${t}`,r,!0)}}})),t.spinner(d,!1)})),e.on("change",(e=>{E("choice_domain")}),"#order_request_domain"),e.on("click",(e=>{let r=t.getTarget(e,".selectable"),s=t.getElement(".selected",t.getParent(r,".selectables"));if(t.isElement(s)&&t.removeClass(s,"selected"),t.addClass(r,"selected"),t.is(r,".extra")||t.is(r,".plan"))g=t.getData(r,"id"),E("choice_order");else{g=null,h=t.getData(r,"name");const e=t.getElement("#step_content_choice_order");switch(t.removeClass(t.getElement(".selected",e),"selected"),h){case"plan":t.hide(t.getElement(".extras",e)),t.show(t.getElement(".plans",e));break;case"extra":t.hide(t.getElement(".plans",e)),t.show(t.getElement(".extras",e))}E("choice_order_type")}}),".selectables .selectable"),e.addAction(`multistep_${l}_submitted`,(async(e,t)=>{t[h]=g,t.order_type=h,e.stop(),o.ajax(i.getOption("subscription.ajax.add_to_cart")).addNonce().onSuccess((e=>{window.location.href=e})).onError((t=>{e.showMessage(s.error2string(t)),e.resume()})).send(t)}),10,2),e.addFilter(`multistep_${l}_can_goto_next_step`,((e,t)=>{if(!0===e){let s=!1;switch(t.getCurrentStepName()){case"choice_order_type":r.isEmpty(h)&&(s="select_order_type");break;case"choice_order":r.isEmpty(g)&&(s=`select_${h}`)}s&&(e=i.getOption(`subscription.errors.${s}`,!1))}return e})),e.addAction(`multistep_${l}_step_changed`,(e=>{E(e.getCurrentStepName())})),e.addAction("multistep_initialized",(e=>{u=e}))}();