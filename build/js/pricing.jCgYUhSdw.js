/*! For license information please see pricing.jCgYUhSdw.js.LICENSE.txt */
!function(){const e=PRHelper.getHook(),t=PRHelper.getHTML(),s=PRHelper.getType(),r=PRHelper.getTool(),a=PRHelper.getForm(),o=PRHelper.getServer(),n=PRHelper.getRequest(),i=PRHelper.getSetting(),c=t.getElement(".pr-multistep-wrap"),l=t.getAttribute(c,"id"),d=t.getElement(".pr-multistep-body > .pr-spinner",c),p=window.PR_MULTISTEPS[l],_=o.getParams(),m=["order_request_domain","order_type","target","domain","step"];let g,u,h;function E(e){switch(e){case"choice_order_type":t.setElementActivity(t.getElement("#step_content_choice_order_type .next-action"),!s.isEmpty(u),!1);break;case"choice_order":t.setElementActivity(t.getElement("#step_content_choice_order .next-action"),!s.isEmpty(g),!1);break;case"choice_domain":!function(){const e=t.getElement("#step_content_choice_domain a.login-link");if(t.isElement(e)){const t=o.addParams({order_request_domain:"prev_domains"});e.href=o.addParams({redirect_to:encodeURIComponent(t)},e.href)}}()}}s.each(m,(e=>{if(_.hasOwnProperty(e))return t.spinner(d,!0),!1})),e.on("load",(function(){s.each(m,(t=>{if(_.hasOwnProperty(t)){let s=_[t];switch(t){case"order_type":e.simulateClick(`.order-type.selectable[data-name="${s}"]`),u=s,g=_.target,e.simulateClick(`.${u}.selectable[data-id="${g}"]`);break;case"step":p.goto(s);break;default:a.setFieldValue(`#${t}`,s,!0)}}})),t.spinner(d,!1)})),e.on("change",(e=>{E("choice_domain")}),"#order_request_domain"),e.on("click",(e=>{let s=t.getTarget(e,".selectable"),r=t.getElement(".selected",t.getParent(s,".selectables"));if(t.isElement(r)&&t.removeClass(r,"selected"),t.addClass(s,"selected"),t.is(s,".extra")||t.is(s,".plan"))g=t.getData(s,"id"),p.setData("target",g),E("choice_order");else{g=null,u=t.getData(s,"name"),p.setData("target",null),p.setData("order_type",u);const e=t.getElement("#step_content_choice_order");switch(t.removeClass(t.getElement(".selected",e),"selected"),u){case"plan":t.hide(t.getElement(".extras",e)),t.show(t.getElement(".plans",e));break;case"extra":t.hide(t.getElement(".plans",e)),t.show(t.getElement(".extras",e))}E("choice_order_type")}}),".selectables .selectable"),e.addAction(`multistep_${l}_submitted`,(async(e,t)=>{t[u]=g,t.order_type=u,e.stop(),n.ajax(i.getOption("subscription.ajax.add_to_cart")).addNonce().onSuccess((t=>{e.hideActions(),void 0!==t.url?window.location.href=t.url:void 0!==t.message&&p.showMessage(t.message,"success")})).onError((t=>{e.showMessage(r.error2string(t)),e.resume()})).send(t)}),10,2),e.addFilter(`multistep_${l}_can_goto_next_step`,((e,t)=>{if(!0===e){let r=!1;switch(t.getCurrentStepName()){case"choice_order_type":s.isEmpty(u)&&(r="select_order_type");break;case"choice_order":s.isEmpty(g)&&(r=`select_${u}`)}r&&(e=i.getOption(`subscription.errors.${r}`,!1))}return e})),e.addAction(`multistep_${l}_step_changed`,(e=>{E(e.getCurrentStepName())})),e.addAction("multistep_initialized",(e=>{h=e}))}();