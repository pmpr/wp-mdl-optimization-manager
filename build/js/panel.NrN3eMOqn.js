(()=>{"use strict";var t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.loading?n("PanelSpinner"):[t.has_domain?n("PanelSidebar",{key:t.domain_id,attrs:{tabs:t.tabs,args:{domain:t.domain.id}},scopedSlots:t._u([{key:"before_tabs",fn:function(){return[t.domains?n("PanelTreeSelectInput",{attrs:{options:t.getDomains,props:t.dropdownProps},on:{input:t.onInput}}):n("PanelSpinner")]},proxy:!0}],null,!1,402786651)}):n("PanelNotice",{attrs:{content:t.translate("optimization.not_registered_domain"),type:"info"}})]],2)};t._withStripped=!0;const e="fetchOptimizationDomains",n="setOptimizationDomains",i={[n](t,e){t.domains=e}},a={state:{domains:{}},actions:{[e]({commit:t,state:e},i){return new Promise(((e,a)=>{this._vm.$api.$get("/pmpr/v1/optimization-manager/get-domains",{params:i}).then((i=>{t(n,i.data),e(i.data)})).catch((({response:t})=>{a(t)}))}))}},mutations:i,getters:{}};PMPRTrigger.addFilter("panel_store_modules",(t=>(t["optimization-manager"]=a,t)),50);function o(t,e,n,i,a,o,s,r){var l,d="function"==typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=n,d._compiled=!0),i&&(d.functional=!0),o&&(d._scopeId="data-v-"+o),s?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},d._ssrRegister=l):a&&(l=r?function(){a.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(d.functional){d._injectStyles=l;var m=d.render;d.render=function(t,e){return l.call(e),m(t,e)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:d}}const s=o({name:"PanelModuleOptimization",data:()=>({domain:null,domains:null,loading:!0,domain_id:null,has_domain:!0}),beforeMount(){this.$store.dispatch(e).then((t=>{t?(this.domain=t[0],this.domains={},this.$helper.$each(t,(t=>{this.domains[t.id]=t})),this.domain_id=this.domain.id):this.has_domain=!1,this.loading=!1})).catch((()=>{this.loading=!1,this.has_domain=!1}))},methods:{onInput(t){this.domain_id=t,this.domain=this.domains[t],this.$forceUpdate()}},computed:{tabs(){return this.$router.getRouteChildren("panel_module_optimization")},getDomains(){let t=this.domains,e=[];return this.$helper.$each(t,(t=>{e.push({id:t.id,label:this.$helper.$sprintf("%s (%s)",[t.name,t.value])})})),e},dropdownProps(){return{name:"domain_select",value:this.domain_id}}}},t,[],!1,null,null,null).exports;var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("PanelDatatableCard",{attrs:{columns:t.columns,remote:t.remoteProps},scopedSlots:t._u([{key:"td",fn:function(t){var e=t.item,i=(t.column,t.column_key);t.id;return[n("PanelCellText",{attrs:{text:e[i]}})]}}])})};r._withStripped=!0;const l=o({name:"PanelModuleOptimizationBudget",props:{domain:null},computed:{remoteProps(){return{api:"/pmpr/v1/optimization-manager/get-budgets","query-values":{domain:this.domain},"query-params":{sort:"created_at",sortBy:"orderBy"}}},columns(){return{value:{title:this.translate("optimization.budget.column.value"),width:"30%"},level_title:{title:this.translate("optimization.budget.column.level"),width:"30%"},start:{title:this.translate("optimization.budget.column.start"),width:"30%"},end:{title:this.translate("optimization.budget.column.end"),width:"10%"}}}}},r,[],!1,null,null,null).exports;var d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("PanelDatatableCard",{attrs:{columns:t.columns,remote:t.remoteProps},scopedSlots:t._u([{key:"td",fn:function(e){var i=e.item,a=(e.column,e.column_key),o=e.id;return["url"!==a?n("PanelCellText",{attrs:{text:i[a]}}):t.titles[o]?n("PanelCellText",{attrs:{text:t.titles[o],link:i[a],target:"_blank"}}):n("PanelSpinner",{attrs:{position:"start",margin:"0"}})]}}])})};d._withStripped=!0;const m=o({name:"PanelModuleOptimizationPage",props:{domain:null},data:()=>({titles:{}}),computed:{remoteProps(){return{api:"/pmpr/v1/optimization-manager/get-pages","query-values":{domain:this.domain},"query-params":{sort:"created_at",sortBy:"orderBy"}}},columns(){return{url:{title:this.translate("column.url"),width:"30%",callback:{async:async(t,e,n)=>{let i=await this.$api.$get(n);this.titles[t]=i.data.match(/<title>(.*?)<\/title>/)[1]}},singleline:!0},status:{title:this.translate("column.status"),width:"25%"},created_at:{title:this.translate("column.created_at"),width:"20%"}}}}},d,[],!1,null,null,null).exports;window.PanelModuleOptimization=s,window.PanelModuleOptimizationPage=m,window.PanelModuleOptimizationBudget=l})();