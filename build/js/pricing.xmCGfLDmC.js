/*! For license information please see pricing.xmCGfLDmC.js.LICENSE.txt */
!function(){const e=PRHelper.getHook(),t=PRHelper.getHTML(),r=PRHelper.getType(),s=PRHelper.getTool(),a=PRHelper.getForm(),o=PRHelper.getServer(),n=PRHelper.getRequest(),l=PRHelper.getSetting(),i=["order_request_type","order_request_domain","order_request_new_domain","order_request_new_domain_title"];let c,d,p,_=0;e.on("load",(function(){const s=o.getParams();r.each(i,(e=>{s.hasOwnProperty(e)&&a.setFieldValue(`#${e}`,s[e],!0)})),s.hasOwnProperty("order_type")&&(e.simulateClick(t.getElement(`.selectable.order-type[data-name="${s.order_type}"]`)),s.hasOwnProperty("target")&&!r.isEmpty(d)&&(e.simulateClick(t.getElement(`.selectable.${d}[data-id="${s.target}"]`)),_=s.step??0,void 0!==p&&_>0&&p.goto(_)))})),e.on("click",(e=>{let r=t.getTarget(event,".selectable"),s=t.getElement(".selected",t.getParent(r,".selectables"));if(t.isElement(s)&&t.removeClass(s,"selected"),t.addClass(r,"selected"),t.is(r,".extra")||t.is(r,".plan"))c=t.getData(r,"id");else{c=null,d=t.getData(r,"name");const e=t.getElement("#step_content_choice_order");switch(t.removeClass(t.getElement(".selected",e),"selected"),d){case"plan":t.hide(t.getElement(".extras",e)),t.show(t.getElement(".plans",e));break;case"extra":t.hide(t.getElement(".plans",e)),t.show(t.getElement(".extras",e))}}}),".selectables .selectable"),e.addAction("optimization_multistep_submitted",(async(e,t)=>{t[d]=c,t.order_type=d,e.stop(),n.ajax(l.getOption("subscription.ajax.add_to_cart")).addNonce().onSuccess((e=>{window.location.href=e})).onError((t=>{e.showMessage(s.error2string(t)),e.resume()})).send(t)})),e.addFilter("multistep_can_goto_next_step",(async(e,s)=>{if(!0===e){let n=!1;switch(s.getCurrentStepName()){case"choice_order_type":r.isEmpty(d)&&(n="select_order_type");break;case"choice_order":r.isEmpty(c)&&(n=`select_${d}`);break;case"choice_ownership":!function(){let e={step:4,order_request_domain:"prev_domains"};r.each(i,(t=>{e.hasOwnProperty(t)||(e[t]=a.getFieldValue(`#${t}`))})),e.target=c,e.order_type=d;const s=t.getElement("#step_content_choice_domain a.login-link");if(t.isElement(s)){const t=o.addParams(e);s.href=o.addParams({redirect_to:encodeURIComponent(t)},s.href)}}()}n&&(e=l.getOption(`subscription.errors.${n}`,!1))}return e})),e.addAction("multistep_initialized",(e=>{p=e,_>0&&e.goto(_)}))}();