(()=>{"use strict";var t=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.loading?i("PanelSpinner"):[t.has_domain?i("PanelSidebar",{key:t.domain_id,attrs:{tabs:t.tabs,args:{domain:t.domain.id}},scopedSlots:t._u([{key:"before_tabs",fn:function(){return[t.domains?i("PanelTreeSelectInput",{attrs:{options:t.getDomains,props:t.dropdownProps},on:{input:t.onInput}}):i("PanelSpinner")]},proxy:!0}],null,!1,402786651)}):i("PanelNotice",{attrs:{content:t.translate("optimization.not_registered_domain"),type:"info"}})]],2)};t._withStripped=!0;const e="fetchOptimizationDomains",i="setOptimizationDomains",n={state:{domains:{}},actions:{[e]({commit:t,state:e},n){return new Promise(((a,o)=>{let s=e.domains;this._vm.$helper.$isEmpty(s)?this._vm.$api.$get("/pmpr/v1/optimization-manager/get-domains",{params:n}).then((e=>{t(i,e.data),a(e.data)})).catch((({response:t})=>{o(t)})):a(s)}))}},mutations:{[i](t,e){t.domains=e}},getters:{}};PMPRTrigger.addFilter("panel_store_modules",(t=>(t["optimization-manager"]=n,t)),50);function a(t,e,i,n,a,o,s,r){var l,d="function"==typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=i,d._compiled=!0),n&&(d.functional=!0),o&&(d._scopeId="data-v-"+o),s?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},d._ssrRegister=l):a&&(l=r?function(){a.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(d.functional){d._injectStyles=l;var m=d.render;d.render=function(t,e){return l.call(e),m(t,e)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:d}}var o=a({name:"PanelModuleOptimization",data:()=>({domain:null,domains:null,loading:!0,domain_id:null,has_domain:!0}),beforeMount(){this.$store.dispatch(e).then((t=>{t?(this.domain=t[0],this.domains={},this.$helper.$each(t,(t=>{this.domains[t.id]=t})),this.domain_id=this.domain.id):this.has_domain=!1,this.loading=!1})).catch((()=>{this.loading=!1,this.has_domain=!1}))},methods:{onInput(t){this.domain_id=t,this.domain=this.domains[t],this.$forceUpdate()}},computed:{tabs(){return this.$router.getRouteChildren("panel_module_optimization")},getDomains(){let t=this.domains,e=[];return this.$helper.$each(t,(t=>{e.push({id:t.id,label:this.$helper.$sprintf("%s (%s)",[t.name,t.value])})})),e},dropdownProps(){return{name:"domain_select",value:this.domain_id}}}},t,[],!1,null,null,null);o.options.__file="asset/js/panel/view/Optimization.vue";const s=o.exports;var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("PanelDatatableCard",{attrs:{columns:t.columns,remote:t.remoteProps},scopedSlots:t._u([{key:"td",fn:function(t){var e=t.item,n=(t.column,t.column_key);t.id;return[i("PanelCellText",{attrs:{text:e[n]}})]}}])})};r._withStripped=!0;var l=a({name:"PanelModuleOptimizationBudget",props:{domain:null},computed:{remoteProps(){return{api:"/pmpr/v1/optimization-manager/get-budgets","query-values":{domain:this.domain},"query-params":{sort:"created_at",sortBy:"orderBy"}}},columns(){return{value:{title:this.translate("optimization.budget.column.value"),width:"30%"},level_title:{title:this.translate("optimization.budget.column.level"),width:"30%"},start:{title:this.translate("optimization.budget.column.start"),width:"30%"},end:{title:this.translate("optimization.budget.column.end"),width:"10%"}}}}},r,[],!1,null,null,null);l.options.__file="asset/js/panel/view/optimization/Budget.vue";const d=l.exports;var m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("PanelDatatableCard",{attrs:{columns:t.columns,remote:t.remoteProps},scopedSlots:t._u([{key:"td",fn:function(e){var n=e.item,a=(e.column,e.column_key),o=e.id;return["url"!==a?i("PanelCellText",{attrs:{text:n[a]}}):t.titles[o]?i("PanelCellText",{attrs:{text:t.titles[o],link:n[a],target:"_blank"}}):i("PanelSpinner",{attrs:{position:"start",margin:"0"}})]}}])})};m._withStripped=!0;var u=a({name:"PanelModuleOptimizationPage",props:{domain:null},data:()=>({titles:{}}),computed:{remoteProps(){return{api:"/pmpr/v1/optimization-manager/get-pages","query-values":{domain:this.domain},"query-params":{sort:"created_at",sortBy:"orderBy"}}},columns(){return{url:{title:this.translate("column.url"),width:"30%",callback:{async:async(t,e,i)=>{let n=await this.$api.$get(i);this.titles[t]=n.data.match(/<title>(.*?)<\/title>/)[1]}},singleline:!0},status:{title:this.translate("column.status"),width:"25%"},created_at:{title:this.translate("column.created_at"),width:"20%"}}}}},m,[],!1,null,null,null);u.options.__file="asset/js/panel/view/optimization/Page.vue";const p=u.exports;window.PanelModuleOptimization=s,window.PanelModuleOptimizationPage=p,window.PanelModuleOptimizationBudget=d})();